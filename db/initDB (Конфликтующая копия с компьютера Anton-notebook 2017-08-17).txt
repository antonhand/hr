USE hr;

CREATE TABLE Job (
	ID INT NOT NULL AUTO_INCREMENT,
	Function varchar(50) NOT NULL UNIQUE,
	PRIMARY KEY (ID)
);

CREATE TABLE Vacancy (
	ID INT NOT NULL AUTO_INCREMENT,
	CompanyID INT NOT NULL,
	JobID INT NOT NULL,
	Salary INT NOT NULL,
	EducationID INT NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE Employee (
	ID INT NOT NULL AUTO_INCREMENT,
	Surname varchar(50) NOT NULL,
	Name varchar(50) NOT NULL DEFAULT 'NULL',
	Midname varchar(50),
	Address varchar(100) NOT NULL,
	EducationID INT NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE JobStory (
	EmployeeID INT NOT NULL,
	CompanyId INT NOT NULL,
	JobId INT NOT NULL,
	Salary INT NOT NULL,
	StartDate DATE NOT NULL,
	EndDate DATE,
	PRIMARY KEY (EmployeeID,CompanyId,JobId,StartDate)
);

CREATE TABLE Company (
	ID INT NOT NULL AUTO_INCREMENT,
	Name varchar(100) NOT NULL DEFAULT 'NULL',
	PRIMARY KEY (ID)
);

CREATE TABLE Education (
	ID INT NOT NULL AUTO_INCREMENT,
	Name varchar(50) NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE JobHunt (
	EmployeeID INT NOT NULL AUTO_INCREMENT,
	JobID INT NOT NULL,
	SalaryMin INT,
	SalaryMax INT,
	PRIMARY KEY (EmployeeID, JobID)
);

CREATE TABLE VacancyReq (
	VacancyID INT NOT NULL AUTO_INCREMENT,
	JobID INT NOT NULL,
	ExpMonths INT NOT NULL,
	PRIMARY KEY (VacancyID, JobID)
);

ALTER TABLE Vacancy ADD CONSTRAINT Vacancy_fk0 FOREIGN KEY (CompanyID) REFERENCES Company(ID);

ALTER TABLE Vacancy ADD CONSTRAINT Vacancy_fk1 FOREIGN KEY (JobID) REFERENCES Job(ID);

ALTER TABLE Vacancy ADD CONSTRAINT Vacancy_fk2 FOREIGN KEY (EducationID) REFERENCES Education(ID);

ALTER TABLE Employee ADD CONSTRAINT Employee_fk0 FOREIGN KEY (EducationID) REFERENCES Education(ID);

ALTER TABLE JobStory ADD CONSTRAINT JobStory_fk0 FOREIGN KEY (EmployeeID) REFERENCES Employee(ID);

ALTER TABLE JobStory ADD CONSTRAINT JobStory_fk1 FOREIGN KEY (CompanyId) REFERENCES Company(ID);

ALTER TABLE JobStory ADD CONSTRAINT JobStory_fk2 FOREIGN KEY (JobId) REFERENCES Job(ID);

ALTER TABLE JobHunt ADD CONSTRAINT JobHunt_fk0 FOREIGN KEY (EmployeeID) REFERENCES Employee(ID);

ALTER TABLE JobHunt ADD CONSTRAINT JobHunt_fk1 FOREIGN KEY (JobID) REFERENCES Job(ID);

ALTER TABLE VacancyReq ADD CONSTRAINT VacancyReq_fk0 FOREIGN KEY (VacancyID) REFERENCES Vacancy(ID);

ALTER TABLE VacancyReq ADD CONSTRAINT VacancyReq_fk1 FOREIGN KEY (JobID) REFERENCES Job(ID);

